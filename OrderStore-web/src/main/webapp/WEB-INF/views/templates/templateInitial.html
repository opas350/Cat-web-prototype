<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:th="http://www.thymeleaf.org">
<head>
<title layout:title-pattern="$LAYOUT_TITLE - $CONTENT_TITLE">Demo - Accenture</title>

<!-- Latest compiled and minified CSS -->

<link th:href="@{/static/css/app.css}" rel="stylesheet" />
<link
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css"
	th:href="@{/webjars/bootstrap/3.3.6/css/bootstrap.min.css}"
	rel="stylesheet" />
<link href="https://code.jquery.com/ui/1.12.0/themes/base/jquery-ui.css"
	th:href="@{/webjars/jquery-ui-themes/1.11.4/south-street/jquery-ui.min.css}"
	rel="stylesheet" />

<link
	href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css"
	th:href="@{/webjars/toastr/2.1.2/build/toastr.min.css}"
	rel="stylesheet" />

</head>
<body>
	<header>
		<h1>Create Order</h1>
	</header>
	<div layout:fragment="custom-content">
		<p>Your page content goes here</p>
	</div>
	<footer>
		<p layout:fragment="custom-footer">footer Template<p>
		 &copy; <label th:text="#{msg.loging.footer.company}"></label> 2017 <label th:text="#{msg.loging.footer.company.copyright}"></label>
		
		<div layout:fragment="javascript-fragment">
			<script type="text/javascript" th:inline="javascript"
				src="http://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"
				th:src="@{/webjars/jquery/2.2.4/dist/jquery.min.js}"></script>
			<script type="text/javascript" th:inline="javascript"
				src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"
				th:src="@{/webjars/jquery-ui/1.11.4/jquery-ui.min.js}"></script>
			<script type="text/javascript" th:inline="javascript"
				src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
				th:src="@{/webjars/bootstrap/3.3.6/js/bootstrap.min.js	}"></script>

			<script type="text/javascript" th:inline="javascript"
				src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment.min.js"
				th:src="@{/webjars/moment/2.14.1/min/moment.min.js}"></script>

			<script type="text/javascript" th:inline="javascript"
				src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"
				th:src="@{/webjars/toastr/2.1.2/build/toastr.min.js}"></script>

			<script type="text/javascript" th:inline="javascript">
			$(document)
					.ready(
							function() {

								//Cargar Subtotal
                                var subtotal = 0.0;
                                $('#productTableBody > tr').each(function() {
                                    //console.log($(this).children(":nth-of-type(3)").children(":First"));
                                    subtotal+=$(this).children(":nth-of-type(3)").children(":First").val()*
                                        $(this).children(":nth-of-type(4)").children(":First").val();
                                });
                                $('#subtotalValue').val(subtotal);

                                //Cargar IVA/TAX
								var tax = 16;
                                $('#taxValue').val(subtotal * (tax/100));

                                //Cargar Total
                                var total = subtotal + (subtotal * (tax/100));
                                $('#totalValue').val(total);

                                $("#search").click(function() {
                                    //Disable the button search
                                    enableSearchButton(false);

                                    // Prevent the form from submitting via the browser.
                                    event.preventDefault();

									var searchValue = $("#searchValue").val();
                                    $.get( "refresh", { searchValue: searchValue } )
                                        .done(function( data ) {
                                        $('#allResults').show();
                                        $('#allResults').html(data);
                                        //alert( data.toString() );
                                    });

                                });

								$("#btn1").click(function() {
									alert("JQuery is working.");
								});

								$("#btn2")
										.click(
												function() {
													var text = $("#text1").val();
													var path = /*[[@{/showMessage/}]]*/
													window.location.href = path + text;	
												});

								$("#btn3")
										.click(
												function() {
													var text = $("#text2").val();
													var path = /*[[@{/showMessage?msg=}]]*/;
													window.location.href = path + text;
												});

								$("#btn4").click(
										function() {
											var testDate = '02/12/2016';
											var formatString = moment(testDate).format('MM/DD/YYYY');
											toastr.success('Success messages: '	+ formatString);

											testDate = new Date();
											var formatString = moment(testDate).format('MM/DD/YYYY');
											toastr.info('Success messages: '+ formatString);
										});

//                                $("#btnSubmit").click(
//                                    function() {
//
//                                        console.log("Entered btnSubmit");
//                                        var orderAdded = $("#orderAdded").val();
//                                        $.get( "save",
//                                            function() {
//                                            console.log("on function");
//                                                console.log("order added: " );
//                                              //toastr.info(data);
//                                                //alert( data.toString() );
//                                            });
//                                        console.log("exit GET");
////                                      $.get("save", {orderAdded : orderAdded};
////                                          toastr.info(orderAdded);
//                                    });

                                $('input[name*=quantity]').focusout(function(){

                                    //Cargar Subtotal
                                    var subtotal = 0.0;
                                    $('#productTableBody > tr').each(function() {
                                        //console.log($(this).children(":nth-of-type(3)").children(":First"));
										subtotal+=$(this).children(":nth-of-type(3)").children(":First").val()*
											$(this).children(":nth-of-type(4)").children(":First").val();
                                    });

                                    $('#subtotalValue').val(subtotal);

                                    //Cargar IVA/TAX
                                    var tax = 16;
                                    $('#taxValue').val(subtotal * (tax/100));

                                    //Cargar Total
                                    var total = subtotal + (subtotal * (tax/100));
                                    $('#totalValue').val(total);

                                });
                            });


            function enableSearchButton(flag) {
                $("#btn-search").prop("disabled", flag);
            }

		</script>

		</div>
	</footer>
</body>
</html>